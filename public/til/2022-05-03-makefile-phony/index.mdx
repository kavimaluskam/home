---
title: What is the purpose of .PHONY in a Makefile?
date: "2022-05-03"
tags:
  - makefile
---

## Why?

It's common to see `.PHONY` in Makefile like:

```makefile
.PHONY: clean
clean:
  rm -rf *.o
```

But what's the usage / implication?

## What is the design of Makefile?

According to the [GNU Make Documentation](https://www.gnu.org/software/make/manual/make.html#Rule-Introduction):,
each _command_ in Makefile is conceptually known as _target_.

```makefile
target â€¦ : prerequisites â€¦
        recipe
        â€¦
        â€¦
```

### Example

A target is usually the name of a file that is generated by a program;
examples of targets are executable or object files:

Considering a directory with below files:

```shell
hello hello.c makefile
```

with below command:

```makefile
hello:hello.c
    cc hello.c -o hello
```

Now assume that file 'hello' is a text file containing some data,
which was created after 'hello.c' file. So the **modification (or creation)**
**time-stamp of 'hello' will be newer than that of the 'hello.c'**.
So when we will invoke 'make hello' from command line, it will print as:

```shell
make: `hello' is up to date.
```

Now access the 'hello.c' file and put some white spaces in it,
which doesn't affect the code syntax or logic then save and quit. Now the
**modification time-stamp of hello.c is newer than that of the 'hello'.**
Now if you invoke 'make hello', it will execute the commands as:

```shell
cc hello.c -o hello
```

And the file 'hello' (text file) will be overwritten with a new binary
file 'hello' (result of above compilation command).

## So, what is .PHONY doing?

In contrast, [Phony Target](https://www.gnu.org/software/make/manual/make.html#Phony-Targets)
in Makefile is a kind of _phony_ target, which is not building any file with
the identical target name.

In another sense, it's like a **Force mode**,
or **a file making with target always not up-to-date**.

#### Reference

1. [What is the purpose of phony in a makefile @ stackoverflow](https://stackoverflow.com/questions/2145590/what-is-the-purpose-of-phony-in-a-makefile)
2. [GNU Make document - Phony Targets](https://www.gnu.org/software/make/manual/make.html#Phony-Targets)
3. [Phony @ cambridge dictionary ðŸ“š](https://dictionary.cambridge.org/dictionary/english/phony)
